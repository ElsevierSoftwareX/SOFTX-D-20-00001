.. _ex_basalt:

===============
Picritic Basalt
===============

XML Input File
==============

The basename for this file is ``basalt_circle.xml``.
The file can be run using this command::

    microstructpy --demo=basalt_circle.xml

The full text of the file is:

.. literalinclude:: ../../../../examples/basalt_circle.xml
    :language: xml


Material 1 - Plagioclase
========================

Plagioclase composes approximately 45% of this picritic basalt sample.
It is an *aphanitic* component, meaning fine-grained, and follows a custom
size distribution.

Material 2 - Olivine
====================

Olivine composes approximately 19% of this picritic basalt sample.
There are large *phenocrysts* of olivine in picritic basalt, so the crystals
are generally larger than the other components and have a non-circular shape.
The orientation of the phenocrysts is uniform random, with the aspect ratio
varying from 1 to 3 uniformly.

Materials 3-8
=============

Diopside, hypersthene, magnetite, chromite, ilmenite, and apatie compose
approximately 36% of this picritic basalt sample.
They are *aphanitic* components, meaning fine-grained, and follow a custom
size distribution.

Domain Geometry
===============

These materials fill a circular domain with a diameter of 30 mm.


Settings
========

The function will output plots of the microstructure process and those plots
are saved as PNGs.
They are saved in a folder named ``basalt_circle``, in the current directory
(i.e ``./basalt_circle``).

The axes are turned off in these plots, creating PNG files with
minimal whitespace.

Mesh controls are introducted to increase grid resolution, particularly at the
grain boundaries.


Output Files
============

.. only:: not latex

    The three plots that this file generates are the seeding, the polygon mesh,
    and the triangular mesh.
    These three plots are shown below.

    .. figure:: ../../../../examples/basalt_circle/seeds.png
        :alt: Seed geometries.

        Seed geometries
        
    .. figure:: ../../../../examples/basalt_circle/polymesh.png
        :alt: Polygonal mesh.

        Polygonal mesh
        
    .. figure:: ../../../../examples/basalt_circle/trimesh.png
        :alt: Triangular mesh.

        Triangular mesh

    With the ``<verification>`` flag set to ``True``, verification plots are
    generated by MicroStructPy.
    The grain size distribution comparison is given in the plot below.

    .. image:: ../../../../examples/basalt_circle/verification/size_cdf.png
        :alt: Comparing input and output CSDs.

.. only:: latex

    .. raw:: latex

        The three plots that this file generates are the seeding, the polygon mesh,
        and the triangular mesh.
        These three plots are shown in Fig.~\ref{fig:ex_basalt_circle}.

        \begin{figure}[htbp]
            \centering
            \subfloat[Seed geometries]{
                \includegraphics[width=0.3\textwidth]{../../examples/basalt_circle/seeds.png}
            }
            ~
            \subfloat[Polygonal mesh]{
                \includegraphics[width=0.3\textwidth]{../../examples/basalt_circle/polymesh.png}
            }
            ~
            \subfloat[Triangular mesh]{
                \includegraphics[width=0.3\textwidth]{../../examples/basalt_circle/trimesh.png}
            }
            \caption{Output plots for picritic basalt.}
            \label{fig:ex_basalt_circle}
        \end{figure}

        With the {\tt <verification>} flag set to {\tt True}, verification
        plots are generated by MicroStructPy.
        The grain size distribution comparison is given in
        Fig.~\ref{fig:ex_basalt_circle_verif}.

        \begin{figure}[htbp]
            \centering
            \includegraphics[width=0.5\textwidth]{../../examples/basalt_circle/verification/size_cdf.png}
            \caption{Comparing input and output CSDs for picritic basalt.}
            \label{fig:ex_basalt_circle_verif}
        \end{figure}

Comparing the input and output distributions for olivine, it is clear that this
microstructure is not statistically representative.
A larger diameter for the domain would contain more grains of olivine, which
would add more fidelity to the size CDF curve.

